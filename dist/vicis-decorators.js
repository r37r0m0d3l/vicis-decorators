!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("vicis"),require("lodash.clonedeep"),require("lodash.merge")):"function"==typeof define&&define.amd?define(["exports","vicis","lodash.clonedeep","lodash.merge"],r):r((e=e||self).VicisDecorators={},e.vicis,e.lodash.clonedeep,e.lodash.merge)}(this,(function(e,r,t,i){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;const n=Symbol("__vicis_config__"),a=Symbol("__vicis_serializer__");function clone(e){return t(e)}const o={cast:{},defaults:{},defined:[],exclude:[],omit:[],order:[],pick:[],sort:!0,rename:{},replace:{},required:[],transform:{}};function getDefault(){return clone(o)}function merge(e,r){return i(e,r)}function toJSON(){const e=new Object(null);Array.from(new Set(this[n].pick)).forEach(r=>{e[r]=this[r]});const r=this[a].config(this[n]).data(e).getData();return(async()=>{this[a].clear()})(),r}function Serialize(e={}){return function(t){if(Object.is(t.prototype.toJSON,toJSON)||(t.prototype.toJSON=toJSON),n in t.prototype)t.prototype[n]=merge(clone(t.prototype[n]),clone(e||{}));else{const i=merge(getDefault(),clone(e||{})),o=merge(i,clone(t.prototype[n]||{}));t.prototype[n]=o,t.prototype[a]=r.Vicis.factory(o)}return t}}function argsAsArray(e,...r){let t;return t=void 0!==e?Array.isArray(e)?[...e]:[e]:[],r.length&&(t=t.concat(r)),t}function validate(e){e[n]||(e[n]=getDefault(),e[a]=r.Vicis.factory(e[n]))}function serialize(e){let r;return r="string"==typeof e?{rename:e}:{...e},function(e,t){validate(e),Object.keys(r).length>0||e[n].pick.push(t),Object.keys(r).forEach(i=>{switch(i){case"defined":case"exclude":case"omit":!0===r[i]&&e[n][i].push(t);break;case"rename":e[n][i][t]=r.rename,e[n].pick.push(r.rename),e[n].pick.push(t);break;case"required":!0===r[i]&&e[n][i].push(t);break;default:{let a=e[n][i];Array.isArray(a)?(a=new Set(a),a.add(r[i]),a=Array.from(a)):a[t]=r[i],e[n][i]=a}}})}}e.Defaults=function Defaults(e={}){return Serialize({defaults:e})},e.Exclude=function Exclude(e,...r){return Serialize({exclude:argsAsArray(e,...r)})},e.Omit=function Omit(e,...r){return Serialize({omit:argsAsArray(e,...r)})},e.Order=function Order(e,...r){return Serialize({order:argsAsArray(e,...r)})},e.Pick=function Pick(e,...r){return Serialize({pick:argsAsArray(e,...r)})},e.Required=function Required(e,...r){return Serialize({required:argsAsArray(e,...r)})},e.Serialize=Serialize,e.cast=function cast(e){return serialize({cast:e})},e.defaults=function defaults(e){return serialize({defaults:e})},e.defined=function defined(e,r){validate(e),e[n].defined.push(r),e[n].pick.push(r)},e.exclude=function exclude(e,r){validate(e),e[n].exclude.push(r)},e.omit=function omit(e,r){validate(e),e[n].omit.push(r)},e.pick=function pick(e,r){validate(e),e[n].pick.push(r)},e.rename=function rename(e){return serialize(e)},e.replace=function replace(e){return serialize({replace:e})},e.required=function required(e,r){validate(e),e[n].required.push(r)},e.serialize=serialize,e.transform=function transform(e){return serialize({transform:e})},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=vicis-decorators.js.map
