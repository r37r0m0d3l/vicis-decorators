!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vicis"),require("lodash.clonedeep"),require("lodash.merge")):"function"==typeof define&&define.amd?define(["exports","vicis","lodash.clonedeep","lodash.merge"],t):t((e=e||self).VicisDecorators={},e.vicis,e.lodash.clonedeep,e.lodash.merge)}(this,(function(e,t,r,i){"use strict";r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;const n=Symbol("__vicis_config__"),o=Symbol("__vicis_serializer__");function clone(e){return r(e)}const a={cast:{},defaults:{},defined:[],exclude:[],omit:[],order:[],pick:[],sort:!0,rename:{},replace:{},required:[],transform:{}};function getDefaultConfig(){return clone(a)}function validateConfig(e){e[n]||(e[n]=getDefaultConfig(),e[o]=t.Vicis.factory(e[n]))}function serialize(e){let t;return t="string"==typeof e?{rename:e}:{...e},function(e,r){validateConfig(e),Object.keys(t).length>0&&e[n].pick.push(r),Object.keys(t).forEach(i=>{switch(i){case"defined":case"omit":!0===t[i]&&e[n][i].push(r);break;case"rename":e[n][i][r]=t.rename,e[n].pick.push(t.rename);break;case"required":!0===t[i]&&e[n][i].push(r);break;default:{let o=e[n][i];Array.isArray(o)?(o=new Set(o),o.add(t[i]),o=Array.from(o)):o[r]=t[i],e[n][i]=o}}})}}function merge(e,t){return i(e,t)}function toJSON(){const e=new Object(null);Array.from(new Set(this[n].pick)).forEach(t=>{e[t]=this[t]});const t=this[o].data(e).getData();return this[o].clear(),t}e.cast=function cast(e){return serialize({cast:e})},e.defaults=function defaults(e){return serialize({defaults:e})},e.defined=function defined(e,t){validateConfig(e),e[n].defined.push(t)},e.exclude=function exclude(e,t){validateConfig(e),e[n].exclude.push(t)},e.omit=function omit(e,t){validateConfig(e),e[n].omit.push(t)},e.rename=function rename(e){return serialize(e)},e.replace=function replace(e){return serialize({replace:e})},e.serializable=function serializable(e){return function(r){const i=merge(getDefaultConfig(),clone(e||{})),a=merge(i,clone(r.prototype[n]||{}));return r.prototype[n]=a,r.prototype[o]=t.Vicis.factory(a),r.prototype.toJSON=toJSON,r}},e.serialize=serialize,e.transform=function transform(e){return serialize({transform:e})},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=vicis-decorators.js.map
